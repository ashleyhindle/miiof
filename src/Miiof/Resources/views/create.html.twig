{% extends "main.html.twig" %}

{% block content %}
		{% for invoice in invoices %}
				{{invoice.invoiceid}}<hr>
		{% endfor %}

	<div ng-app="miiofApp" ng-controller="CreateCtrl" class='container-fluid' style='width:1100px;'>
		<form method='POST' action='/generate' class='form'>
			<input type='submit' class='btn btn-primary' name='submit' value='GENERATE'>
		    <input name='total' type='hidden' ng-value='invoice.total'>
				<br>

		<div class='row'>
				<div class='col-xs-4'>
						<h3>Details</h3>
						<table class="table table-condensed">
								<tr>
										<th>Invoice #</th>
										<td><input name='invoiceid' placeholder='ID of invoice, get it from last one' ng-model='invoice.invoiceId'></td>
								</tr>
								<tr>
										<th>Issue Date</th>
											<td><input name='date' placeholder='Date, pickable by selector of some sort?' ng-model='invoice.date'></td>
								</tr>
								<tr>
										<th>Subject</th>
										<td><input name='subject' placeholder='Why are you sending this? Or month?' ng-model='invoice.subject'></td>
								</tr>
						</table>
				</div>
				<div class='col-xs-4'>
						<h3>From</h3>
						<div class="form-horizontal">
						  <div class="form-group">
							<label for="from[name]" class="col-sm-2 control-label">Name</label>
							<div class="col-sm-10">
								<input name='from[name]' placeholder='From' ng-model='invoice.from.name'>
							</div>
						  </div>
						  <div class="form-group">
							<label for="from[phone]" class="col-sm-2 control-label">Phone</label>
							<div class="col-sm-10">
								<input name='from[phone]' placeholder='Phone' ng-model='invoice.from.phone'>
							</div>
						  </div>
						  <div class="form-group">
							<label for="from[address]" class="col-sm-2 control-label">Address</label>
							<div class="col-sm-10">
								<textarea name='from[address]' rows="4" ng-model='invoice.from.address'></textarea>
							</div>
						  </div>
						</div>
				</div>


				<div class='col-xs-4'>
						<h3>Invoice For</h3>
						<div class="form-horizontal">
						  <div class="form-group">
							<label for="to[name]" class="col-sm-2 control-label">Name</label>
							<div class="col-sm-10">
								<input name='to[name]' placeholder='To' ng-model='invoice.to.name'>
							</div>
						  </div>
						  <div class="form-group">
							<label for="to[phone]" class="col-sm-2 control-label">Phone</label>
							<div class="col-sm-10">
								<input name='to[phone]' placeholder='Phone' ng-model='invoice.to.phone'>
							</div>
						  </div>
						  <div class="form-group">
							<label for="to[address]" class="col-sm-2 control-label">Address</label>
							<div class="col-sm-10">
								<textarea name='to[address]' rows="4" ng-model='invoice.to.address'></textarea>
							</div>
						  </div>
						</div>
				</div>
		</div>

				<div class='article'>
						<table class="table table-striped table-hover table-condensed">
								<thead>
										<tr>
												<th>&nbsp;</th>
												<th>Description</th>
												<th>Quantity</th>
												<th>Unit Price</th>
												<th>Subtotal</th>
										</tr>
								</thead>
								<tbody>
			<tr ng-repeat="item in invoice.items">
				<td><a href='' ng-click="removeItem(item)">Remove</a></td>
				<td><input ng-model="item.description" name="items[{[{ item.itemId  }]}][description]" placeholder='Description of the thing you want to invoice for'></td>
				<td><input min="0" step="any" ng-model="item.quantity" name="items[{[{ item.itemId }]}][quantity]" placeholder='Quantity of the thing you want to invoice for'></td>
				<td><input min="0" step="any" ng-model="item.price" type='number' name="items[{[{ item.itemId }]}][price]" placeholder='Price of the thing you want to invoice for'></td>
				<td><span ng-model="item.subtotal">{[{invoice.currency.symbol}]}{[{ item.quantity * item.price | number:2}]}</span></td>
			</tr>
								</tbody>
						<tfoot>
								<tr>
										<td colspan=2>&nbsp;</td>
										<td><h4><span><strong>Amount Due</strong></span></h4></td>
										<td><h4><strong><span data-prefix>&pound;</span><span>{[{invoice.total|number:2}]}</span></strong></h4></td>
								</tr>
						</tfoot>
						</table>
							<a href='' ng-click="addItem()">Add new invoice item</a>
				</div>
				<div class='aside'>
						<h4><span>Additional Notes</span></h4>
						<div>
								<textarea rows="3" class='form-control' name='notes'>{[{invoice.notes}]}</textarea>
						</div>
				</div>
		</div>
		</form>
	</div>
{% endblock %}
